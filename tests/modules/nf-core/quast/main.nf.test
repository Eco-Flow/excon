nextflow_process {

    name "Test Process QUAST"
    script "modules/nf-core/quast/main.nf"
    process "QUAST"

    test("Should run without failures") {

        when {
            params {
                // define parameters here. Example:
                clean = false
                outdir = "results"
            }
            process {
                """
                // define inputs of the process here. Example:
                input[0] = Channel.of( ["Drosophila_santomea", file("${projectDir}/data/gffread_input/genome.fna.gz")] )
                input[1] = Channel.of( ["Drosophila_santomea", file("${projectDir}/data/gffread_input/genomic.gff.gz")] )
                """
            }
        }

        then {
            assert process.success
            with(process.out) {
                assert results.size() == 1
                // assert results[0][1].size() == 12
            }
            //Assert snapshot of .tsv file with summary
            assert snapshot(
                path("${launchDir}/${params.outdir}/quast/Drosophila_santomea.tsv"),
            ).match("quast_stats")
        }

    }

}
